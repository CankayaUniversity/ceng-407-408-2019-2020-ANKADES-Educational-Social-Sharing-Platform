{% extends 'ankacademy/layout/layout.html' %}
{% load static %}
{% block stylesheet %}
    <link href="{% static 'ankacademy/libs/datatables/dataTables.bootstrap4.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'ankacademy/libs/datatables/responsive.bootstrap4.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'ankacademy/libs/datatables/dataTables.colVis.css' %}" rel="stylesheet" type="text/css"/>
{% endblock %}
{% block title %}{{ instance.get_full_name }} | Ankacademy{% endblock %}
{% block content %}
    <div class="container-fluid">
        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Ankacademy</a></li>
                            <li class="breadcrumb-item">{{ instance.get_full_name }}</li>
                            <li class="breadcrumb-item">Paylaşımlarım</li>
                        </ol>
                    </div>
                    <h4 class="page-title">Paylaşımlarım</h4>
                </div>
            </div>
        </div>
        <!-- end page title -->
        <div class="row">
            <div class="col-xl-3 col-md-4">
                <div class="mt-4">
                    <div class="text-center card-box shadow-none border border-secoundary">
                        <div class="member-card">
                            <div class="avatar-xl member-thumb mb-3 mx-auto d-block">
                                <img src="{{ instance.image.url }}" class="rounded-circle img-thumbnail"
                                     alt="profile-image">
                                {% if userDetailGroup == 'admin' or userDetailGroup == 'moderator' or userDetailGroup == 'ogretmen' %}
                                    <i class="mdi mdi-star-circle member-star text-success"
                                       title="verified user"></i>{% endif %}
                            </div>

                            <div class="">
                                <h5 class="font-18 mb-1">{{ instance.get_full_name }}</h5>
                                <p class="text-muted mb-2">{{ creatorGroup.title }}</p>
                            </div>
                            {% if instance.username != request.user.username %}
                                {% if existFollower %}
                                    <button type="button" class="btn btn-primary btn-sm mt-2 "><span
                                            class="mdi mdi-thumb-up"><a style="color: #fff !important;"
                                                                        href="{% url 'follow_account' instance.username %}">Takibi Bırak</a></span>
                                    </button>
                                {% else %}
                                    <button type="button" class="btn btn-primary btn-sm mt-2 "><span
                                            class="mdi mdi-thumb-up"><a style="color: #fff !important;"
                                                                        href="{% url 'follow_account' instance.username %}">Takip Et</a></span>
                                    </button>
                                {% endif %}
                            {% endif %}
                            {% if instance.username != request.user.username %}
                                <button type="button"
                                        class="btn btn-danger btn-sm width-sm waves-effect mt-2 waves-light">Mesaj
                                </button>
                            {% endif %}
                            <p class="sub-header mt-3">
                                {% if instance.bio %}{{ instance.bio }}{% else %}
                                    {{ instance.get_full_name }} kullanıcıs biyografisini
                                    paylaşmamış{% endif %}
                            </p>

                            <hr/>

                            <div class="text-left">
                                <p class="text-muted font-13"><strong>Ad :</strong> <span
                                        class="ml-4">{{ instance.get_full_name }}</span>
                                </p>

                                <p class="text-muted font-13"><strong>Email :</strong> <span
                                        class="ml-4">{{ instance.email }}</span>
                                </p>

                                <p class="text-muted font-13"><strong>Üyelik :</strong> <span
                                        class="ml-4">{{ userDetailGroup.title }}</span></p>
                            </div>
                            <hr/>
                            <ul class="social-links list-inline mt-4">
                                <li class="list-inline-item">
                                    <a title="" data-placement="top" data-toggle="tooltip" class="tooltips"
                                       href=""
                                       data-original-title="Facebook"><i class="fab fa-facebook-f"></i></a>
                                </li>
                                <li class="list-inline-item">
                                    <a title="" data-placement="top" data-toggle="tooltip" class="tooltips"
                                       href=""
                                       data-original-title="Twitter"><i class="fab fa-twitter"></i></a>
                                </li>
                                <li class="list-inline-item">
                                    <a title="" data-placement="top" data-toggle="tooltip" class="tooltips"
                                       href=""
                                       data-original-title="Skype"><i class="fab fa-skype"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-box shadow-none border border-secoundary">
                        <div class="table-responsive">
                            <table class="table table-bordered mb-0">
                                <tbody>
                                <tr>
                                    <th scope="row">Takipçi:</th>
                                    <td>{{ followers.count }}</td>
                                </tr>
                                <tr>
                                    <th scope="row">Takip:</th>
                                    <td><span class="label label-danger">{{ followings.count }}</span></td>
                                </tr>
                                <tr>
                                    <th scope="row">Makale:</th>
                                    <td><span class="label label-danger">{{ articlesCount.count }}</span></td>
                                </tr>
                                <tr>
                                    <th scope="row">Soru:</th>
                                    <td><span class="label label-danger">{{ questionsCount.count }}</span></td>
                                </tr>
                                <tr>
                                    <th scope="row">Kurs:</th>
                                    <td><span class="label label-danger">{{ coursesCount.count }}</span></td>
                                </tr>
                                <tr>
                                    <th scope="row">Sınav:</th>
                                    <td><span class="label label-danger">{{ examsCount.count }}</span></td>
                                </tr>
                                <tr>
                                    <th scope="row">Onaylanmış Cevap:</th>
                                    <td><span class="label label-danger">{{ certifiedAnswersCount.count }}</span></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="mt-4">
                    <div class="card-box">
                        <ul class="nav nav-tabs tabs-bordered nav-justified" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="article-b2-tab" data-toggle="tab" href="#article-b2"
                                   role="tab"
                                   aria-controls="article-b2" aria-selected="true">
                                    <span class="d-block d-sm-none"><i class="fas fa-book-open"></i></span>
                                    <span class="d-none d-sm-block">Makaleler</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="question-b2-tab" data-toggle="tab" href="#question-b2"
                                   role="tab" aria-controls="question-b2" aria-selected="false">
                                    <span class="d-block d-sm-none"><i class="fas fa-question"></i></span>
                                    <span class="d-none d-sm-block">Sorular</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="exam-b2-tab" data-toggle="tab" href="#exam-b2" role="tab"
                                   aria-controls="exam-b2" aria-selected="false">
                                    <span class="d-block d-sm-none"><i class="fa fa-file"></i></span>
                                    <span class="d-none d-sm-block">Sınavlar</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="course-b2-tab" data-toggle="tab" href="#course-b2" role="tab"
                                   aria-controls="course-b2" aria-selected="false">
                                    <span class="d-block d-sm-none"><i class="fas fa-video"></i></span>
                                    <span class="d-none d-sm-block">Kurslar</span>
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane show active" id="article-b2" role="tabpanel"
                                 aria-labelledby="article-b2-tab">
                                <div class="card-box table-responsive">
                                    {% if articles %}
                                        <table id="all-articles"
                                               class="table table-striped table-bordered dt-responsive nowrap"
                                               style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                            <thead>
                                            <tr>
                                                <th>Başlık</th>
                                                <th>Kategori</th>
                                                <th>Görüntülenme</th>
                                                <th>Beğeni</th>
                                                <th>Yorum Sayısı</th>
                                                <th>Oluşturulma</th>
                                                <th>Son Güncelleme</th>
                                                <th>Güncelle</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for article in articles %}
                                                <tr>
                                                    <td>{{ article.title|truncatechars:50 }}</td>
                                                    <td>{{ article.categoryId.title }}</td>
                                                    <td>{{ article.view }}</td>
                                                    <td>{{ article.likes.count }}</td>
                                                    <td>{{ article.articlecomment_set.count }}</td>
                                                    <td>{{ article.createdDate }}</td>
                                                    <td>{% if article.updatedDate %}{{ article.updatedDate }}{% else %}
                                                        Güncellenmemiş{% endif %}</td>
                                                    <td>
                                                        <a href="{% url 'edit_article' article.postNumber  %}">

                                                        </a>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                    {% else %}
                                        <div class="timeline timeline-left">
                                            <article class="timeline-item">
                                                <div class="timeline-desk">
                                                    <div class="panel">
                                                        <div class="timeline-box">
                                                            <div class="callout callout-warning col-lg-12 col-sm-12 col-xs-12 col-md-12">
                                                                <p>Makale bulunamadı.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="tab-pane" id="question-b2" role="tabpanel"
                                 aria-labelledby="question-b2-tab">
                                {% if questions %}
                                    <table id="all-questions"
                                           class="table table-striped table-bordered dt-responsive nowrap"
                                           style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                        <tr>
                                            <th>Başlık</th>
                                            <th>Kategori</th>
                                            <th>Görüntülenme</th>
                                            <th>Beğeni</th>
                                            <th>Yorum Sayısı</th>
                                            <th>Oluşturulma</th>
                                            <th>Son Güncelleme</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for question in questions %}
                                            <tr>
                                                <td>{{ question.title|truncatechars:50 }}</td>
                                                <td>{{ question.categoryId.title }}</td>
                                                <td>{{ question.view }}</td>
                                                <td>{{ question.likes.count }}</td>
                                                <td>{{ question.questioncomment_set.count }}</td>
                                                <td>{{ question.createdDate }}</td>
                                                <td>{% if question.updatedDate %}{{ question.updatedDate }}{% else %}
                                                    Güncellenmemiş{% endif %}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                {% else %}
                                    <div class="timeline timeline-left">
                                        <article class="timeline-item">
                                            <div class="timeline-desk">
                                                <div class="panel">
                                                    <div class="timeline-box">
                                                        <div class="callout callout-warning col-lg-12 col-sm-12 col-xs-12 col-md-12">
                                                            <p>Soru bulunamadı.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </article>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="tab-pane" id="exam-b2" role="tabpanel" aria-labelledby="exam-b2-tab">
                                {% if exams %}
                                    <table id="all-articles"
                                           class="table table-striped table-bordered dt-responsive nowrap"
                                           style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                        <tr>
                                            <th>Başlık</th>
                                            <th>Ders</th>
                                            <th>Dönem</th>
                                            <th>Görüntülenme</th>
                                            <th>Beğeni</th>
                                            <th>Oluşturulma</th>
                                            <th>Son Güncelleme</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for exam in exams %}
                                            <tr>
                                                <td>{{ exam.title|truncatechars:50 }}</td>
                                                <td>{{ exam.lectureId.title }}</td>
                                                <td>{{ exam.termId.title }}</td>
                                                <td>{{ exam.view }}</td>
                                                <td>{{ exam.createdDate }}</td>
                                                <td>{% if exam.updatedDate %}{{ exam.updatedDate }}{% else %}
                                                    Güncellenmemiş{% endif %}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                {% else %}
                                    <div class="timeline timeline-left">
                                        <article class="timeline-item">
                                            <div class="timeline-desk">
                                                <div class="panel">
                                                    <div class="timeline-box">
                                                        <div class="callout callout-warning col-lg-12 col-sm-12 col-xs-12 col-md-12">
                                                            <p>Sınav bulunamadı.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </article>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="tab-pane" id="course-b2" role="tabpanel" aria-labelledby="course-b2-tab">
                                {% if courses %}
                                    <table id="all-articles"
                                           class="table table-striped table-bordered dt-responsive nowrap"
                                           style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                        <tr>
                                            <th>Başlık</th>
                                            <th>Kategori</th>
                                            <th>Görüntülenme</th>
                                            <th>Beğeni</th>
                                            <th>Yorum Sayısı</th>
                                            <th>Öğrenci Sayısı</th>
                                            <th>Oluşturulma</th>
                                            <th>Son Güncelleme</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for course in courses %}
                                            <tr>
                                                <td>{{ course.title|truncatechars:50 }}</td>
                                                <td>{{ course.categoryId.title }}</td>
                                                <td>{{ course.view }}</td>
                                                <td>{{ course.likes.count }}</td>
                                                <td>{{ course.coursecomment_set.count }}</td>
                                                <td>{{ course.enrolledAccount.count }}</td>
                                                <td>{{ course.createdDate }}</td>
                                                <td>{% if course.updatedDate %}{{ course.updatedDate }}{% else %}
                                                    Güncellenmemiş{% endif %}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                {% else %}
                                    <div class="timeline timeline-left">
                                        <article class="timeline-item">
                                            <div class="timeline-desk">
                                                <div class="panel">
                                                    <div class="timeline-box">
                                                        <div class="callout callout-warning col-lg-12 col-sm-12 col-xs-12 col-md-12">
                                                            <p>Kurs bulunamadı.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </article>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="{% static 'ankacademy/libs/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'ankacademy/libs/datatables/dataTables.bootstrap4.min.js' %}"></script>

    <script src="{% static 'ankacademy/libs/datatables/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'ankacademy/js/pages/datatables.init.js' %}"></script>
{% endblock %}